<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>DsInboxStorage</title>
    <link href="../../../images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "../../../";</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async="async"></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/jetbrains-mono.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="../../../scripts/prism.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
<link href="../../../images/logo-icon.svg">
<link href="../../../styles/custom-styles.css" rel="Stylesheet">
</head>
<body>
<div class="navigation-wrapper" id="navigation-wrapper">
    <div id="leftToggler"><span class="icon-toggler"></span></div>
    <div class="library-name">
            <a href="../../../index.html">
                    <span>datastore</span>
            </a>
    </div>
    <div>
1.9.0    </div>
    <div class="pull-right d-flex">
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":datastore:dokkaHtml/main">jvm</button>
        </div>
        <button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
    </div>
</div>
<div id="container">
    <div id="leftColumn">
        <div id="sideMenu"></div>
    </div>
    <div id="main">
<div class="main-content" data-page-type="classlike" id="content" pageIds="datastore::io.spine.server.storage.datastore/DsInboxStorage///PointingToDeclaration//-1862999860">
  <div class="breadcrumbs"><a href="../../../index.html">datastore</a><span class="delimiter">/</span><a href="../index.html">io.spine.server.storage.datastore</a><span class="delimiter">/</span><span class="current">DsInboxStorage</span></div>
  <div class="cover ">
    <h1 class="cover"><span>Ds</span><wbr></wbr><span>Inbox</span><wbr></wbr><span><span>Storage</span></span></h1>
    <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace"><span class="token keyword">public </span><span class="token keyword">class </span><a href="index.html">DsInboxStorage</a><span class="token keyword"> extends </span><a href="../-ds-message-storage/index.html">DsMessageStorage</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">I</a><span class="token punctuation">, </span><a href="../-ds-message-storage/index.html">M</a><span class="token punctuation">, </span><a href="../-ds-message-storage/index.html">R</a><span class="token operator">&gt;</span></div><p class="paragraph">InboxStorage implementation based on Google Cloud Datastore. </p><p class="paragraph">Allows to run on top of either Datastore in native mode or Firestore in Datastore mode. </p><p class="paragraph">When operating in a native Datastore mode, no messages are modified or read in transactions and no parent-child relations are used to store the records. In practice, such an approach means there is no guarantee for the read, write and delete operations to be executed in the order of calling. </p><p class="paragraph">For Firestore in Datastore mode there are few improvements: </p><ul><li>The <code class="lang-kotlin">InboxMessage</code> records are stored as children of a common parent, grouped by the <code class="lang-kotlin">ShardIndex</code>. </li><li>All read, write and remove operations are performed transactionally, i.e. taking the ancestor filter and composite Datastore keys into account. As Datastore guarantees the serializable isolation for transactions, all the modifications of the records are executed in a strict order. </li></ul><p class="paragraph">The unit tests are launched on the local Datastore emulator which only supports Datastore native mode at the moment. Therefore, by default, <code class="lang-kotlin">DsInboxStorage</code><a href="-ds-inbox-storage.html">is created</a> in this mode as well.</p></div></div>
  </div>
  <div class="tabbedcontent">
    <div class="tabs-section" tabs-section="tabs-section"><button class="section-tab" data-active="" data-togglable="CONSTRUCTOR,TYPE,FUNCTION,PROPERTY">Members</button></div>
    <div class="tabs-section-body">
      <div data-togglable="CONSTRUCTOR">
        <h2 class="">Constructors</h2>
        <div class="table"><a data-name="-1734616005%2FConstructors%2F-1862999860" anchor-label="DsInboxStorage" id="-1734616005%2FConstructors%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-togglable="CONSTRUCTOR" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="-ds-inbox-storage.html"><span>Ds</span><wbr></wbr><span>Inbox</span><wbr></wbr><span><span>Storage</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1734616005%2FConstructors%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span>void <a href="-ds-inbox-storage.html"><span class="token function">DsInboxStorage</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="../-datastore-wrapper/index.html">DatastoreWrapper</a> datastore<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span>boolean multitenant</span></span><span class="token punctuation">)</span></div><div class="brief ">Creates the instance of <code class="lang-kotlin">DsInboxStorage</code> operating with Datastore database in <a href="../-datastore-mode/-n-a-t-i-v-e/index.html">native</a> mode.</div><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span>void <a href="-ds-inbox-storage.html"><span class="token function">DsInboxStorage</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="../-datastore-wrapper/index.html">DatastoreWrapper</a> datastore<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span>boolean multitenant<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span><a href="../-datastore-mode/index.html">DatastoreMode</a> mode</span></span><span class="token punctuation">)</span></div><div class="brief ">Creates the instance of <code class="lang-kotlin">DsInboxStorage</code> which takes the mode in which Datastore database was created.</div></div></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-togglable="FUNCTION">
        <h2 class="">Functions</h2>
        <div class="table"><a data-name="-1640402296%2FFunctions%2F-1862999860" anchor-label="columns" id="-1640402296%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="columns.html"><span><span>columns</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1640402296%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-array/index.html">Array</a><span class="token operator">&lt;</span><span data-unresolved-link="io.spine.server.storage.datastore/MessageColumn///PointingToDeclaration/">MessageColumn</span><span class="token operator">&lt;</span>InboxMessage<span class="token operator">&gt;</span><span class="token operator">&gt;</span> <a href="columns.html"><span class="token function">columns</span></a><span class="token punctuation">(</span><span class="token punctuation">)</span></div><div class="brief ">Obtains the array of the message columns to use while writing messages to the storage.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="67118530%2FFunctions%2F-1862999860" anchor-label="idOf" id="67118530%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="id-of.html"><span>id</span><wbr></wbr><span><span>Of</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="67118530%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span>InboxMessageId <a href="id-of.html"><span class="token function">idOf</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>InboxMessage message</span></span><span class="token punctuation">)</span></div><div class="brief ">Obtains an identifier for the message.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-914403766%2FFunctions%2F-1862999860" anchor-label="key" id="-914403766%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="key.html"><span><span>key</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-914403766%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword">final </span><span class="token keyword"></span>Key <a href="key.html"><span class="token function">key</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>InboxMessageId id</span></span><span class="token punctuation">)</span></div><div class="brief ">Obtains the Datastore <code class="lang-kotlin">Key</code> value out of the message identifier.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="2077804792%2FFunctions%2F-1862999860" anchor-label="newestMessageToDeliver" id="2077804792%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="newest-message-to-deliver.html"><span>newest</span><wbr></wbr><span>Message</span><wbr></wbr><span>To</span><wbr></wbr><span><span>Deliver</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="2077804792%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html">Optional</a><span class="token operator">&lt;</span>InboxMessage<span class="token operator">&gt;</span> <a href="newest-message-to-deliver.html"><span class="token function">newestMessageToDeliver</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>ShardIndex index</span></span><span class="token punctuation">)</span></div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="1915363226%2FFunctions%2F-1862999860" anchor-label="readAll" id="1915363226%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="read-all.html"><span>read</span><wbr></wbr><span><span>All</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1915363226%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span>Page&lt;InboxMessage&gt; <a href="read-all.html"><span class="token function">readAll</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>ShardIndex index<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span>int pageSize</span></span><span class="token punctuation">)</span></div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="121332705%2FFunctions%2F-1862999860" anchor-label="removeAll" id="121332705%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="remove-all.html"><span>remove</span><wbr></wbr><span><span>All</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="121332705%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span>void <a href="remove-all.html"><span class="token function">removeAll</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html">Iterable</a><span class="token operator">&lt;</span>InboxMessage<span class="token operator">&gt;</span> messages</span></span><span class="token punctuation">)</span></div><div class="brief ">Removes all the messages from the storage by their identifiers.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="1260274533%2FFunctions%2F-1862999860" anchor-label="write" id="1260274533%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="write.html"><span><span>write</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1260274533%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span>void <a href="write.html"><span class="token function">write</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>InboxMessage message</span></span><span class="token punctuation">)</span></div><div class="brief ">Writes the message to the storage.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="238185388%2FFunctions%2F-1862999860" anchor-label="writeAll" id="238185388%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="write-all.html"><span>write</span><wbr></wbr><span><span>All</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="238185388%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span>void <a href="write-all.html"><span class="token function">writeAll</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html">Iterable</a><span class="token operator">&lt;</span>InboxMessage<span class="token operator">&gt;</span> messages</span></span><span class="token punctuation">)</span></div><div class="brief ">Writes all the passed messages to the storage in a bulk.</div></div></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-togglable="FUNCTION">
        <h2 class="">Inherited functions</h2>
        <div class="table"><a data-name="117525108%2FFunctions%2F-1862999860" anchor-label="index" id="117525108%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/--index--.html"><span><span>index</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="117525108%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html">Iterator</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">I</a><span class="token operator">&gt;</span> <a href="../-ds-message-storage/--index--.html"><span class="token function">index</span></a><span class="token punctuation">(</span><span class="token punctuation">)</span></div><div class="brief ">Always throws an <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/UnsupportedOperationException.html">UnsupportedOperationException</a>.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-381848007%2FFunctions%2F-1862999860" anchor-label="key" id="-381848007%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/key.html"><span><span>key</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-381848007%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword">final </span><span class="token keyword"></span>Key <a href="../-ds-message-storage/key.html"><span class="token function">key</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><span data-unresolved-link="io.spine.server.storage.datastore/RecordId///PointingToDeclaration/">RecordId</span> recordId</span></span><span class="token punctuation">)</span></div><div class="brief ">Creates a new Datastore <code class="lang-kotlin">Key</code> value from the provided record identifier.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-1039345003%2FFunctions%2F-1862999860" anchor-label="keyWithAncestor" id="-1039345003%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/key-with-ancestor.html"><span>key</span><wbr></wbr><span>With</span><wbr></wbr><span><span>Ancestor</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1039345003%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword">final </span><span class="token keyword"></span>Key <a href="../-ds-message-storage/key-with-ancestor.html"><span class="token function">keyWithAncestor</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html">String</a> keyValue<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span>PathElement ancestor</span></span><span class="token punctuation">)</span></div><div class="brief ">Creates a Datastore <code class="lang-kotlin">Key</code> with an ancestor.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="1271789366%2FFunctions%2F-1862999860" anchor-label="newTransaction" id="1271789366%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/new-transaction.html"><span>new</span><wbr></wbr><span><span>Transaction</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1271789366%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword">final </span><span class="token keyword"></span><a href="../-transaction-wrapper/index.html">TransactionWrapper</a> <a href="../-ds-message-storage/new-transaction.html"><span class="token function">newTransaction</span></a><span class="token punctuation">(</span><span class="token punctuation">)</span></div><div class="brief ">Starts a new transaction.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="717607025%2FFunctions%2F-1862999860" anchor-label="parentKey" id="717607025%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/parent-key.html"><span>parent</span><wbr></wbr><span><span>Key</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="717607025%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword">final </span><span class="token keyword"></span>Key <a href="../-ds-message-storage/parent-key.html"><span class="token function">parentKey</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="../-kind/index.html">Kind</a> parentKind<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html">Object</a> parentId</span></span><span class="token punctuation">)</span></div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-1101003956%2FFunctions%2F-1862999860" anchor-label="read" id="-1101003956%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/read.html"><span><span>read</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1101003956%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html">Iterator</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">M</a><span class="token operator">&gt;</span> <a href="../-ds-message-storage/read.html"><span class="token function">read</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>Builder queryBuilder</span></span><span class="token punctuation">)</span></div><div class="brief ">Reads the messages from the storage.</div><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html">Optional</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">M</a><span class="token operator">&gt;</span> <a href="../-ds-message-storage/read.html"><span class="token function">read</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="../-ds-message-storage/index.html">R</a> request</span></span><span class="token punctuation">)</span></div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-1031967959%2FFunctions%2F-1862999860" anchor-label="readAll" id="-1031967959%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/read-all.html"><span>read</span><wbr></wbr><span><span>All</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1031967959%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html">Iterator</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">M</a><span class="token operator">&gt;</span> <a href="../-ds-message-storage/read-all.html"><span class="token function">readAll</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>Builder queryBuilder<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span>int readBatchSize</span></span><span class="token punctuation">)</span></div><div class="brief ">Reads all the messages from the storage.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="576681496%2FFunctions%2F-1862999860" anchor-label="readAllTransactionally" id="576681496%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/read-all-transactionally.html"><span>read</span><wbr></wbr><span>All</span><wbr></wbr><span><span>Transactionally</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="576681496%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html">Iterator</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">M</a><span class="token operator">&gt;</span> <a href="../-ds-message-storage/read-all-transactionally.html"><span class="token function">readAllTransactionally</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>Builder queryBuilder</span></span><span class="token punctuation">)</span></div><div class="brief ">Starts new transaction and reads the messages from the storage in the scope of the started transaction.</div><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html">Iterator</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">M</a><span class="token operator">&gt;</span> <a href="../-ds-message-storage/read-all-transactionally.html"><span class="token function">readAllTransactionally</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>Builder queryBuilder<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span>int limit</span></span><span class="token punctuation">)</span></div><div class="brief ">Starts a new transaction and reads all the messages from the storage in its scope.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="521617738%2FFunctions%2F-1862999860" anchor-label="readTransactionally" id="521617738%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/read-transactionally.html"><span>read</span><wbr></wbr><span><span>Transactionally</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="521617738%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html">Optional</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">M</a><span class="token operator">&gt;</span> <a href="../-ds-message-storage/read-transactionally.html"><span class="token function">readTransactionally</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="../-ds-message-storage/index.html">R</a> request</span></span><span class="token punctuation">)</span></div><div class="brief ">Reads the message according to the passed read request.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-469448224%2FFunctions%2F-1862999860" anchor-label="removeAllTransactionally" id="-469448224%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/remove-all-transactionally.html"><span>remove</span><wbr></wbr><span>All</span><wbr></wbr><span><span>Transactionally</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-469448224%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword"></span>void <a href="../-ds-message-storage/remove-all-transactionally.html"><span class="token function">removeAllTransactionally</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html">Iterable</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">M</a><span class="token operator">&gt;</span> messages</span></span><span class="token punctuation">)</span></div><div class="brief ">Starts a new transaction and removes all the messages from the storage by their identifiers in its scope.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="1985737343%2FFunctions%2F-1862999860" anchor-label="toEntity" id="1985737343%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/to-entity.html"><span>to</span><wbr></wbr><span><span>Entity</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1985737343%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword">final </span><span class="token keyword"></span>Entity <a href="../-ds-message-storage/to-entity.html"><span class="token function">toEntity</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="../-ds-message-storage/index.html">M</a> message</span></span><span class="token punctuation">)</span></div><div class="brief ">Converts the given message to Entity.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-283087657%2FFunctions%2F-1862999860" anchor-label="toMessage" id="-283087657%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/to-message.html"><span>to</span><wbr></wbr><span><span>Message</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-283087657%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword">final </span><span class="token keyword"></span><a href="../-ds-message-storage/index.html">M</a> <a href="../-ds-message-storage/to-message.html"><span class="token function">toMessage</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span>Entity e</span></span><span class="token punctuation">)</span></div><div class="brief ">Converts the given Entity to message.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-1450384280%2FFunctions%2F-1862999860" anchor-label="write" id="-1450384280%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/write.html"><span><span>write</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1450384280%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">public </span><span class="token keyword">final </span><span class="token keyword"></span>void <a href="../-ds-message-storage/write.html"><span class="token function">write</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="../-ds-message-storage/index.html">I</a> id<span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword"></span><a href="../-ds-message-storage/index.html">M</a> message</span></span><span class="token punctuation">)</span></div><div class="brief ">Writes the message to the storage.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-374071415%2FFunctions%2F-1862999860" anchor-label="writeAllTransactionally" id="-374071415%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/write-all-transactionally.html"><span>write</span><wbr></wbr><span>All</span><wbr></wbr><span><span>Transactionally</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-374071415%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword"></span>void <a href="../-ds-message-storage/write-all-transactionally.html"><span class="token function">writeAllTransactionally</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html">Iterable</a><span class="token operator">&lt;</span><a href="../-ds-message-storage/index.html">M</a><span class="token operator">&gt;</span> messages</span></span><span class="token punctuation">)</span></div><div class="brief ">Writes all the passed messages to the storage in a bulk.</div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="1772324472%2FFunctions%2F-1862999860" anchor-label="writeTransactionally" id="1772324472%2FFunctions%2F-1862999860" data-filterable-set=":datastore:dokkaHtml/main"></a>
          <div class="table-row" data-filterable-current=":datastore:dokkaHtml/main" data-filterable-set=":datastore:dokkaHtml/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="../-ds-message-storage/write-transactionally.html"><span>write</span><wbr></wbr><span><span>Transactionally</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1772324472%2FFunctions%2F-1862999860"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":datastore:dokkaHtml/main"><div class="symbol monospace block"><span class="token keyword">protected </span><span class="token keyword">final </span><span class="token keyword"></span>void <a href="../-ds-message-storage/write-transactionally.html"><span class="token function">writeTransactionally</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword"></span><a href="../-ds-message-storage/index.html">M</a> message</span></span><span class="token punctuation">)</span></div><div class="brief ">Behaves similarly to write, but performs the operation in scope of a Datastore transaction.</div></div></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>Copyright 2023, TeamDev</span><span
                class="pull-right"><span>Generated by </span><a
                href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
    </div>
</div>
</body>
</html>
